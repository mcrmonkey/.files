#!/bin/bash
# Docker funcs


export DOCKER_REPO_PREFIX=mcrmonkey

dcleanup(){
    local containers
    local volumes
    local images

    containers=( $(docker ps -aq 2>/dev/null) )
    volumes=( $(docker ps --filter status=exited -q 2>/dev/null) )
    images=( $(docker images --filter dangling=true -q 2>/dev/null) )

    docker rm "${containers[@]}" 2>/dev/null
    docker rm -v "${volumes[@]}" 2>/dev/null
    docker rmi "${images[@]}" 2>/dev/null
}



lpass(){
    docker run -it --rm \
        -v ${HOME}/.lpass:/home/lpass/.lpass \
        --name lpass \
        ${DOCKER_REPO_PREFIX}/lpass "$@"
}


gcal(){
    docker run --rm -it \
        -v /etc/localtime:/etc/localtime:ro \
        -v "${HOME}/.gcalcli:/home/gcal" \
        --name gcal \
        ${DOCKER_REPO_PREFIX}/gcal "$@"
}

gmail(){
    (
    export IMAP_SERVER
    export SMTP_SERVER

    docker run -it --rm \
        -e GMAIL \
        -e GMAIL_NAME \
        -e GMAIL_PASS \
        -e GMAIL_FROM \
        -e GPG_ID \
        -e IMAP_SERVER \
        -e SMTP_SERVER \
        -v "${HOME}/.gnupg:/home/user/.gnupg:ro" \
        -v /etc/localtime:/etc/localtime:ro \
        --name "mutt" \
        ${DOCKER_REPO_PREFIX}/mutt
    )
}

alias alpine='docker run -it --rm alpine /bin/sh'
alias centos='docker run -it --rm centos:7 /bin/bash'
alias debjess='docker run -it --rm debian:jessie /bin/bash'
alias stretch='docker run -it --rm debian:stretch /bin/bash'

